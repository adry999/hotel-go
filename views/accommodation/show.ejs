<%- include("../partials/header.ejs"); %>

<div class="container">
    <h1>Information about a particular accommodation</h1>

    <div class="row">
        <% for (var i = 0; i < accommodation.photos.length; i++) { %>
            <div class="col-4">
                <div class="card">
                    <div class="image" style="height: auto;">
                        <img src="<%= accommodation.photos[i].src %>" style="max-width: 100%; max-height: 100%;">
                    </div>
                </div>
            </div>
        <% } %>
    </div>
    <div class="row">
        <ul class="list-group">
            <li><%= accommodation.name %></li>
            <li><%= accommodation.address %></li>
            <li><%= accommodation.description %></li>
            <% for (var i = 0; i < accommodation.roomTypes.length; i++) { %>
                <hr>
                <li><%= accommodation.roomTypes[i].name %></li>
                <li><%= accommodation.roomTypes[i].beds %></li>
                <li>Recommended for <%= accommodation.roomTypes[i].peopleCount %> people</li>
                <li>Number of rooms: <%= accommodation.roomTypes[i].availableRooms %></li>
                <li>
                    Facilities:
                    <ul>
                        <% accommodation.roomTypes[i].facilities.forEach(function(facility){ %>
                            <li><%= facility %></li>
                        <% }); %>
                    </ul>
                </li>
                <li>Price: $<%= accommodation.roomTypes[i].price %></li>
            <% } %>
        </ul>
    </div>
    <hr>
    <form action="/user/bookings" method="POST">
        <div class="form-group">
            <input type="text" class="form-control" name="book[room]" placeholder="Room">
        </div>
        <div class="form-group">
            <input type="date" class="form-control" name="book[checkIn]">
        </div>
        <div class="form-group">
            <input type="date" class="form-control" name="book[checkOut]">
        </div>
        <div class="form-group">
            <input type="number" class="form-control" name="book[adults]" placeholder="Adults">
        </div>
        <div class="form-group">
            <input type="number" class="form-control" name="book[price]" placeholder="Price">
        </div>
        <input type="hidden" name="book[accommodation]" value="<%= accommodation._id %>">
        <% if (isLoggedIn) { %>
            <button class="btn btn-success">Book a room</button>
        <% } else { %>
            <a class="btn btn-info" href="/user/login">Login to book</a>
        <% } %>
    </form>
   
</div>


<%- include("../partials/footer.ejs"); %>